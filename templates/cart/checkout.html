{% extends 'base.html' %}
{% load math_filters %}
{% block title %}Order Confirmation{% endblock %}

{% block content %}
<div style="max-width:700px; margin:50px auto; padding:40px; background:var(--card); border-radius:14px; box-shadow:var(--shadow);">
    
    <h2 style="color:var(--green); font-size:32px; margin-bottom:20px; text-align:center;">Thank You!</h2>
    <p style="color:var(--muted); font-size:16px; margin-bottom:30px; text-align:center;">
        Your order has been successfully placed.
    </p>

    {% if order %}
    <div style="margin-bottom:30px;">
        <h3 style="color:var(--green); margin-bottom:10px;">Order Details</h3>
        <p><strong>Order ID:</strong> {{ order.id }}</p>
        <p><strong>Customer:</strong> {{ order.customer_name }}</p>
        <p><strong>Date:</strong> {{ order.date|date:"d M Y H:i" }}</p>

        <table style="width:100%; border-collapse:collapse; margin-top:20px; text-align:center;">
            <thead style="background:var(--green); color:white;">
                <tr>
                    <th style="padding:10px;">Product</th>
                    <th style="padding:10px;">Quantity</th>
                    <th style="padding:10px;">Unit Price</th>
                    <th style="padding:10px;">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order.items %}
                <tr style="border-bottom:1px solid #ddd;">
                    <td style="padding:10px; text-align:left;">{{ item.name }}</td>
                    <td style="padding:10px;">{{ item.quantity }}</td>
                    <td style="padding:10px;">₹{{ item.unit_price|floatformat:2 }}</td>
                    <td style="padding:10px;">₹{{ item.quantity|multiply:item.unit_price|floatformat:2 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <p style="text-align:right; margin-top:15px; font-size:16px; font-weight:600;">
            Total: ₹{{ order.total_price|floatformat:2 }}
        </p>
    </div>
    {% endif %}

    <div style="display:flex; justify-content:center; gap:12px; flex-wrap:wrap; margin-top:20px;">

        <!-- Continue Shopping -->
        <a href="{% url 'shop' %}" style="padding:12px 20px; background:var(--green); color:white; border-radius:8px; font-weight:600; text-decoration:none;">
            Continue Shopping
        </a>
    </div>
</div>
{% endblock %}
