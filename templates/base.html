{% load static %}
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FarmerBasket — {% block title %}{% endblock %}</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Main navigation">
      <div class="brand">
        <div class="logo">FB</div>
        <div>
          <h1>FarmerBasket</h1>
          <p class="muted">Fresh from Farm to Basket</p>
        </div>
      </div>
      <nav>
        <ul class="nav-list">
          <li class="nav-item"><a href="{% url 'home' %}"><span>🏠</span> Home</a></li>
          <li class="nav-item">
            <a href="{% url 'shop' %}"><span>🧺</span> Shop</a>
            <div class="shop-cats" role="list">
              <a class="cat" href="{% url 'shop' %}?category=fruits">Fruits</a>
              <a class="cat" href="{% url 'shop' %}?category=vegetables">Vegetables</a>
              <a class="cat" href="{% url 'shop' %}?category=dairy">Dairy</a>
              <a class="cat" href="{% url 'shop' %}?category=grains">Grains</a>
            </div>
          </li>
          <li class="nav-item"><a href="{% url 'about' %}"><span>👩‍🌾</span> About Us</a></li>
          <li class="nav-item"><a href="{% url 'contact' %}"><span>✉️</span> Contact</a></li>
          {% if user.is_authenticated %}
            <li class="nav-item"><a href="{% url 'logout' %}"><span>🔐</span> Logout</a></li>
          {% else %}
            <li class="nav-item"><a href="{% url 'login' %}"><span>🔐</span> Login / Sign Up</a></li>
          {% endif %}
          <li class="nav-item"><a href="{% url 'view_cart' %}"><span>🛒</span> Cart</a></li>
        </ul>
      </nav>
      <div class="cta">
        <a class="btn" href="{% url 'shop' %}">Shop Now</a>
      </div>
      <div style="margin-top:18px;font-size:13px;color:var(--muted)">
        <strong>Delivery:</strong> Doorstep in 24-48 hours.<br>
        <strong>Support:</strong> support@farmerbasket.example
      </div>
    </aside>

    <!-- Main content -->
    <main class="main">
      <!-- Header -->
      <div class="header" role="banner" style="display:flex; justify-content:space-between; align-items:center; gap:12px; padding:12px 24px;">
        
        <!-- Left: Logo + Search -->
        <div style="display:flex; gap:12px; align-items:center; flex:1;">
          <div style="font-weight:700;font-size:18px;color:var(--green)">FarmerBasket</div>

          {% if request.resolver_match.url_name == 'home' or request.resolver_match.url_name == 'shop' or request.GET.category|default:'' == 'fruits' or request.GET.category|default:'' == 'vegetables' or request.GET.category|default:'' == 'dairy' or request.GET.category|default:'' == 'grains' %}
          <div class="search" aria-label="Search products" style="flex:1;">
            <form method="get" action="{% url 'shop' %}" style="display:flex; gap:8px; width:100%;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden>
                <path d="M21 21l-4.35-4.35" stroke="#7A7A7A" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
              <input name="q" type="search" placeholder="Search fresh produce, e.g. tomatoes, apples..." style="flex:1;"/>
              <button class="btn light" style="padding:8px 10px;">Search</button>
            </form>
          </div>
          {% endif %}
        </div>

        <!-- Right: Delivery + Cart -->
        <div class="header-right" style="display:flex; gap:16px; align-items:center;">
          <div class="muted" style="font-size:13px">Deliver to: <strong>Home</strong></div>
          <div class="cart" aria-label="Cart">
            <a href="{% url 'view_cart' %}" style="color:inherit; text-decoration:none; font-weight:700;">
              Cart ({% if request.user.is_authenticated %}{{ request.user.cartitem_set.count }}{% else %}0{% endif %})
            </a>
          </div>
        </div>

      </div>

      <!-- Messages -->
      {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
      {% endif %}

      <!-- Main content block -->
      <div class="content">
        {% block content %}{% endblock %}
      </div>

      <!-- Footer -->
      <footer>
        <div>
          © <strong>FarmerBasket</strong> — All rights reserved. 
          <div class="muted" style="margin-top:6px">Contact: support@farmerbasket.example · +91 98765 43210</div>
        </div>
        <div class="socials" aria-label="Social links">
          <a href="#" title="Facebook">f</a>
          <a href="#" title="Instagram">ig</a>
          <a href="#" title="Twitter">t</a>
        </div>
      </footer>
    </main>
  </div>
</body>
</html>
